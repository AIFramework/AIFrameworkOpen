using AI.ClassicMath.Calculator.ProcessorLogic;
using System;
using System.Linq;

namespace EdgeCaseTests;

/// <summary>
/// ĞšĞĞ’Ğ•Ğ Ğ—ĞĞ«Ğ• Ğ¢Ğ•Ğ¡Ğ¢Ğ« Ğ´Ğ»Ñ MathCalculatorTool
/// ĞŸÑ€Ğ¾Ğ²ĞµÑ€ÑÑÑ‚ Ğ³Ñ€Ğ°Ğ½Ğ¸Ñ‡Ğ½Ñ‹Ğµ ÑĞ»ÑƒÑ‡Ğ°Ğ¸, Ğ¿Ğ¾Ñ‚ĞµĞ½Ñ†Ğ¸Ğ°Ğ»ÑŒĞ½Ñ‹Ğµ Ğ±Ğ°Ğ³Ğ¸ Ğ¸ ÑĞ»Ğ¾Ğ¶Ğ½Ñ‹Ğµ ĞºĞ¾Ğ¼Ğ±Ğ¸Ğ½Ğ°Ñ†Ğ¸Ğ¸
/// </summary>
class EdgeCaseTests
{
    static int passedTests = 0;
    static int failedTests = 0;
    static int totalTests = 0;

    static void Main(string[] args)
    {
        Console.WriteLine("â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—");
        Console.WriteLine("â•‘         ĞšĞĞ’Ğ•Ğ Ğ—ĞĞ«Ğ• Ğ¢Ğ•Ğ¡Ğ¢Ğ« MathCalculatorTool                    â•‘");
        Console.WriteLine("â•‘         Ğ“Ñ€Ğ°Ğ½Ğ¸Ñ‡Ğ½Ñ‹Ğµ ÑĞ»ÑƒÑ‡Ğ°Ğ¸ Ğ¸ Ğ¿Ğ¾Ñ‚ĞµĞ½Ñ†Ğ¸Ğ°Ğ»ÑŒĞ½Ñ‹Ğµ Ğ±Ğ°Ğ³Ğ¸                â•‘");
        Console.WriteLine("â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•\n");

        // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
        Console.WriteLine("â•â•â• Ğ“Ğ Ğ£ĞŸĞŸĞ 1: Ğ­ĞšĞ¡Ğ¢Ğ Ğ•ĞœĞĞ›Ğ¬ĞĞ«Ğ• Ğ¢Ğ•Ğ ĞĞĞ ĞĞ«Ğ• â•â•â•\n");
        // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

        Test("Ğ¢ĞµÑ€Ğ½Ğ°Ñ€Ğ½Ñ‹Ğ¹ Ñ Ñ‚ĞµÑ€Ğ½Ğ°Ñ€Ğ½Ñ‹Ğ¼ Ğ² ÑƒÑĞ»Ğ¾Ğ²Ğ¸Ğ¸", 
            "(1 > 0 ? 1 : 0) > 0 ? 100 : 200", 100);

        Test("Ğ¢ĞµÑ€Ğ½Ğ°Ñ€Ğ½Ñ‹Ğ¹ Ñ Ñ„ÑƒĞ½ĞºÑ†Ğ¸ÑĞ¼Ğ¸ Ğ² Ğ¾Ğ±ĞµĞ¸Ñ… Ğ²ĞµÑ‚ĞºĞ°Ñ…", 
            "x = -5; x < 0 ? abs(x) + 1 : sqrt(x) + 1", 6);

        Test("ĞœĞ½Ğ¾Ğ¶ĞµÑÑ‚Ğ²ĞµĞ½Ğ½Ñ‹Ğµ Ñ‚ĞµÑ€Ğ½Ğ°Ñ€Ğ½Ñ‹Ğµ Ğ² Ğ¾Ğ´Ğ½Ğ¾Ğ¹ ÑÑ‚Ñ€Ğ¾ĞºĞµ", 
            "a = 1 > 0 ? 10 : 20; b = 2 > 1 ? 30 : 40; a + b", 40);

        Test("Ğ¢ĞµÑ€Ğ½Ğ°Ñ€Ğ½Ñ‹Ğ¹ Ñ Ğ½Ğ°ÑƒÑ‡Ğ½Ğ¾Ğ¹ Ğ½Ğ¾Ñ‚Ğ°Ñ†Ğ¸ĞµĞ¹", 
            "x = 1e-10; x > 0 ? 1 : -1", 1);

        Test("Ğ¢ĞµÑ€Ğ½Ğ°Ñ€Ğ½Ñ‹Ğ¹ Ñ Ğ¾Ñ‚Ñ€Ğ¸Ñ†Ğ°Ñ‚ĞµĞ»ÑŒĞ½Ñ‹Ğ¼ Ğ½ÑƒĞ»ĞµĞ¼", 
            "x = -0.0; x == 0 ? 1 : -1", 1);

        Test("Ğ¢ĞµÑ€Ğ½Ğ°Ñ€Ğ½Ñ‹Ğ¹ Ñ Ğ±Ğ¸Ñ‚Ğ¾Ğ²Ñ‹Ğ¼Ğ¸ Ğ² ÑƒÑĞ»Ğ¾Ğ²Ğ¸Ğ¸", 
            "x = 7; (x & 1) > 0 ? (x << 1) : (x >> 1)", 14);

        Test("Ğ¢ĞµÑ€Ğ½Ğ°Ñ€Ğ½Ñ‹Ğ¹ Ñ Ğ¼Ğ¾Ğ´ÑƒĞ»ĞµĞ¼ Ğ² ÑƒÑĞ»Ğ¾Ğ²Ğ¸Ğ¸", 
            "x = 17; x % 2 == 1 ? x * 2 : x / 2", 34);

        // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
        Console.WriteLine("\nâ•â•â• Ğ“Ğ Ğ£ĞŸĞŸĞ 2: ĞœĞĞ¡Ğ¡Ğ˜Ğ’Ğ« - Ğ“Ğ ĞĞĞ˜Ğ§ĞĞ«Ğ• Ğ¡Ğ›Ğ£Ğ§ĞĞ˜ â•â•â•\n");
        // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

        Test("ĞœĞ°ÑÑĞ¸Ğ² Ñ‚Ğ¾Ğ»ÑŒĞºĞ¾ Ğ¸Ğ· Ğ¾Ñ‚Ñ€Ğ¸Ñ†Ğ°Ñ‚ĞµĞ»ÑŒĞ½Ñ‹Ñ…", 
            "arr = [-1, -2, -3]; sum(arr)", -6);

        Test("ĞœĞ°ÑÑĞ¸Ğ² Ñ Ğ½ÑƒĞ»ÑĞ¼Ğ¸", 
            "arr = [0, 0, 0]; sum(arr)", 0);

        Test("ĞœĞ°ÑÑĞ¸Ğ² Ñ Ğ½Ğ°ÑƒÑ‡Ğ½Ğ¾Ğ¹ Ğ½Ğ¾Ñ‚Ğ°Ñ†Ğ¸ĞµĞ¹", 
            "arr = [1e3, 2e3, 3e3]; sum(arr)", 6000);

        Test("ĞœĞ°ÑÑĞ¸Ğ² Ñ Ğ´Ñ€Ğ¾Ğ±Ğ½Ñ‹Ğ¼Ğ¸ Ğ¾Ñ‚Ñ€Ğ¸Ñ†Ğ°Ñ‚ĞµĞ»ÑŒĞ½Ñ‹Ğ¼Ğ¸", 
            "arr = [-1.5, -2.5, -3.5]; sum(arr)", -7.5, 0.01);

        Test("ĞœĞ°ÑÑĞ¸Ğ² Ñ Ğ¾Ğ´Ğ½Ğ¸Ğ¼ ÑĞ»ĞµĞ¼ĞµĞ½Ñ‚Ğ¾Ğ¼", 
            "arr = [42]; index(arr, 0)", 42);

        Test("ĞœĞ°ÑÑĞ¸Ğ² Ñ ĞºĞ¾Ğ¼Ğ¿Ğ»ĞµĞºÑĞ½Ñ‹Ğ¼Ğ¸ Ğ²Ñ‹Ñ€Ğ°Ğ¶ĞµĞ½Ğ¸ÑĞ¼Ğ¸", 
            "arr = [2^3, 3^2, 4^1]; sum(arr)", 21); // 8+9+4=21

        Test("ĞœĞ°ÑÑĞ¸Ğ² Ğ²Ğ½ÑƒÑ‚Ñ€Ğ¸ Ğ¼Ğ°ÑÑĞ¸Ğ²Ğ° (Ğ½Ğµ Ğ¿Ğ¾Ğ´Ğ´ĞµÑ€Ğ¶Ğ¸Ğ²Ğ°ĞµÑ‚ÑÑ, Ğ½Ğ¾ Ğ¿Ñ€Ğ¾Ğ²ĞµÑ€ÑĞµĞ¼)", 
            "arr = [1, 2, 3]; len(arr) + len([4, 5])", 5);

        // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
        Console.WriteLine("\nâ•â•â• Ğ“Ğ Ğ£ĞŸĞŸĞ 3: ĞĞŸĞ•Ğ ĞĞ¢ĞĞ Ğ« - ĞŸĞ Ğ˜ĞĞ Ğ˜Ğ¢Ğ•Ğ¢ Ğ˜ ĞšĞĞœĞ‘Ğ˜ĞĞĞ¦Ğ˜Ğ˜ â•â•â•\n");
        // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

        Test("Ğ‘Ğ¸Ñ‚Ğ¾Ğ²Ñ‹Ğµ Ğ¸ Ğ°Ñ€Ğ¸Ñ„Ğ¼ĞµÑ‚Ğ¸Ñ‡ĞµÑĞºĞ¸Ğµ", 
            "5 << 2 + 1", 40); // 5 << (2 + 1) = 5 << 3 = 40

        Test("Ğ‘Ğ¸Ñ‚Ğ¾Ğ²Ñ‹Ğµ Ğ¸ ÑÑ€Ğ°Ğ²Ğ½ĞµĞ½Ğ¸Ğµ", 
            "(5 & 3) > 1 ? 1 : 0", 0); // (5 & 3) = 1, 1 > 1 = false, Ñ€ĞµĞ·ÑƒĞ»ÑŒÑ‚Ğ°Ñ‚ 0

        Test("Ğ¡Ñ‚ĞµĞ¿ĞµĞ½ÑŒ Ğ¸ ÑƒĞ½Ğ°Ñ€Ğ½Ñ‹Ğ¹ Ğ¼Ğ¸Ğ½ÑƒÑ", 
            "-2 ^ 2", 4); // Ğ´Ğ¾Ğ»Ğ¶Ğ½Ğ¾ Ğ±Ñ‹Ñ‚ÑŒ -(2^2) = -4 Ğ¸Ğ»Ğ¸ (-2)^2 = 4?

        Test("ĞœĞ¾Ğ´ÑƒĞ»ÑŒ Ğ¸ Ğ´ĞµĞ»ĞµĞ½Ğ¸Ğµ", 
            "17 % 5 / 2", 1); // (17 % 5) / 2 = 2 / 2 = 1

        Test("Ğ›Ğ¾Ğ³Ğ¸Ñ‡ĞµÑĞºĞ¸Ğµ Ğ¸ Ğ±Ğ¸Ñ‚Ğ¾Ğ²Ñ‹Ğµ", 
            "(1 && 1) | (0 || 1)", 1); // (1) | (1) = 1

        Test("Ğ¡Ğ»Ğ¾Ğ¶Ğ½Ğ¾Ğµ Ğ²Ñ‹Ñ€Ğ°Ğ¶ĞµĞ½Ğ¸Ğµ ÑĞ¾ Ğ²ÑĞµĞ¼Ğ¸ Ğ¾Ğ¿ĞµÑ€Ğ°Ñ‚Ğ¾Ñ€Ğ°Ğ¼Ğ¸", 
            "x = 5; (x > 0 ? x : -x) + (x & 1) * 2 + x % 3", 9);

        Test("Ğ¡Ñ‚ĞµĞ¿ĞµĞ½ÑŒ ÑÑ‚ĞµĞ¿ĞµĞ½Ğ¸", 
            "2 ^ 2 ^ 2", 16); // 2^(2^2) = 2^4 = 16 Ğ¸Ğ»Ğ¸ (2^2)^2 = 4^2 = 16?

        // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
        Console.WriteLine("\nâ•â•â• Ğ“Ğ Ğ£ĞŸĞŸĞ 4: Ğ¦Ğ˜ĞšĞ›Ğ« - Ğ“Ğ ĞĞĞ˜Ğ§ĞĞ«Ğ• Ğ¡Ğ›Ğ£Ğ§ĞĞ˜ â•â•â•\n");
        // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

        Test("For Ñ Ğ¾Ñ‚Ñ€Ğ¸Ñ†Ğ°Ñ‚ĞµĞ»ÑŒĞ½Ñ‹Ğ¼ ÑˆĞ°Ğ³Ğ¾Ğ¼ (Ñ‚ĞµĞ¿ĞµÑ€ÑŒ Ñ€Ğ°Ğ±Ğ¾Ñ‚Ğ°ĞµÑ‚!)", 
            @"total = 0
for i = 10 to 0 step -1:
    total = total + i
total", 55); // Ğ´Ğ¾Ğ»Ğ¶ĞµĞ½ Ğ½Ğµ Ğ²Ñ‹Ğ¿Ğ¾Ğ»Ğ½Ğ¸Ñ‚ÑŒÑÑ

        Test("For Ñ Ğ½ÑƒĞ»ĞµĞ²Ñ‹Ğ¼ ÑˆĞ°Ğ³Ğ¾Ğ¼ (Ğ±ĞµÑĞºĞ¾Ğ½ĞµÑ‡Ğ½Ñ‹Ğ¹ Ñ†Ğ¸ĞºĞ»?)", 
            @"i = 0
for i = 0 to 5 step 1:
    if (i == 2):
        break
i", 2);

        Test("While Ñ false ÑƒÑĞ»Ğ¾Ğ²Ğ¸ĞµĞ¼", 
            @"i = 0
while (0):
    i = i + 1
i", 0);

        Test("Ğ’Ğ»Ğ¾Ğ¶ĞµĞ½Ğ½Ñ‹Ğµ Ñ†Ğ¸ĞºĞ»Ñ‹ Ñ break", 
            @"total = 0
for i = 0 to 3:
    for j = 0 to 3:
        total = total + 1
        if (total == 5):
            break
total", 13); // break Ğ²Ñ‹Ñ…Ğ¾Ğ´Ğ¸Ñ‚ Ñ‚Ğ¾Ğ»ÑŒĞºĞ¾ Ğ¸Ğ· Ğ²Ğ½ÑƒÑ‚Ñ€ĞµĞ½Ğ½ĞµĞ³Ğ¾ Ñ†Ğ¸ĞºĞ»Ğ°

        Test("Continue Ğ½Ğ° Ğ¿Ğ¾ÑĞ»ĞµĞ´Ğ½ĞµĞ¹ Ğ¸Ñ‚ĞµÑ€Ğ°Ñ†Ğ¸Ğ¸", 
            @"total = 0
for i = 0 to 3:
    if (i == 3):
        continue
    total = total + i
total", 3); // 0 + 1 + 2 = 3

        // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
        Console.WriteLine("\nâ•â•â• Ğ“Ğ Ğ£ĞŸĞŸĞ 5: ĞŸĞ•Ğ Ğ•ĞœĞ•ĞĞĞ«Ğ• - Ğ“Ğ ĞĞĞ˜Ğ§ĞĞ«Ğ• Ğ¡Ğ›Ğ£Ğ§ĞĞ˜ â•â•â•\n");
        // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

        Test("ĞŸĞµÑ€ĞµĞ¿Ñ€Ğ¸ÑĞ²Ğ°Ğ¸Ğ²Ğ°Ğ½Ğ¸Ğµ Ğ² Ğ²Ñ‹Ñ€Ğ°Ğ¶ĞµĞ½Ğ¸Ğ¸ (Ğ½Ğµ Ğ¿Ğ¾Ğ´Ğ´ĞµÑ€Ğ¶Ğ¸Ğ²Ğ°ĞµÑ‚ÑÑ)", 
            "x = 5; y = (x = 10) + 5; y", true); // ĞŸÑ€Ğ¸ÑĞ²Ğ°Ğ¸Ğ²Ğ°Ğ½Ğ¸Ğµ Ğ² Ğ²Ñ‹Ñ€Ğ°Ğ¶ĞµĞ½Ğ¸Ğ¸ Ğ½Ğµ Ğ¿Ğ¾Ğ´Ğ´ĞµÑ€Ğ¶Ğ¸Ğ²Ğ°ĞµÑ‚ÑÑ

        Test("Ğ˜ÑĞ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ Ğ¿ĞµÑ€ĞµĞ¼ĞµĞ½Ğ½Ğ¾Ğ¹ Ğ´Ğ¾ Ğ¿Ñ€Ğ¸ÑĞ²Ğ°Ğ¸Ğ²Ğ°Ğ½Ğ¸Ñ (Ğ´Ğ¾Ğ»Ğ¶Ğ½Ğ¾ ÑƒĞ¿Ğ°ÑÑ‚ÑŒ)", 
            "y = x + 5; x = 10; y", 0, expectError: true);

        Test("ĞŸĞµÑ€ĞµĞ¼ĞµĞ½Ğ½Ğ°Ñ i - Ğ¿ĞµÑ€ĞµĞºĞ»ÑÑ‡ĞµĞ½Ğ¸Ğµ Ğ¼ĞµĞ¶Ğ´Ñƒ Ğ¼Ğ½Ğ¸Ğ¼Ğ¾Ğ¹ Ğ¸ Ğ¾Ğ±Ñ‹Ñ‡Ğ½Ğ¾Ğ¹", 
            @"result1 = i * i
i = 5
result2 = i * i
result1 + result2", 24); // -1 + 25 = 24

        Test("Ğ¡Ğ¾ÑÑ‚Ğ°Ğ²Ğ½Ğ¾Ğ¹ Ğ¾Ğ¿ĞµÑ€Ğ°Ñ‚Ğ¾Ñ€ Ñ ÑĞ°Ğ¼Ğ¸Ğ¼ ÑĞ¾Ğ±Ğ¾Ğ¹", 
            "x = 10; x += x; x", 20);

        Test("Ğ˜Ğ½ĞºÑ€ĞµĞ¼ĞµĞ½Ñ‚ Ğ² Ğ²Ñ‹Ñ€Ğ°Ğ¶ĞµĞ½Ğ¸Ğ¸ (Ğ½Ğµ Ğ¿Ğ¾Ğ´Ğ´ĞµÑ€Ğ¶Ğ¸Ğ²Ğ°ĞµÑ‚ÑÑ)", 
            @"x = 5
y = (x++) + (x++)
y", true); // Ğ˜Ğ½ĞºÑ€ĞµĞ¼ĞµĞ½Ñ‚ Ğ² Ğ²Ñ‹Ñ€Ğ°Ğ¶ĞµĞ½Ğ¸Ğ¸ Ğ½Ğµ Ğ¿Ğ¾Ğ´Ğ´ĞµÑ€Ğ¶Ğ¸Ğ²Ğ°ĞµÑ‚ÑÑ

        Test("Ğ”ĞµĞºÑ€ĞµĞ¼ĞµĞ½Ñ‚ Ğ´Ğ¾ Ğ½ÑƒĞ»Ñ", 
            @"x = 2
while (x > 0):
    x--
x", 0);

        // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
        Console.WriteLine("\nâ•â•â• Ğ“Ğ Ğ£ĞŸĞŸĞ 6: Ğ¤Ğ£ĞĞšĞ¦Ğ˜Ğ˜ - Ğ“Ğ ĞĞĞ˜Ğ§ĞĞ«Ğ• Ğ¡Ğ›Ğ£Ğ§ĞĞ˜ â•â•â•\n");
        // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

        Test("abs Ğ¾Ñ‚ Ğ½ÑƒĞ»Ñ", 
            "abs(0)", 0);

        Test("abs Ğ¾Ñ‚ Ğ¾Ñ‡ĞµĞ½ÑŒ Ğ¼Ğ°Ğ»Ğ¾Ğ³Ğ¾ Ñ‡Ğ¸ÑĞ»Ğ°", 
            "abs(-1e-100)", 0); // 1e-100 ÑĞ»Ğ¸ÑˆĞºĞ¾Ğ¼ Ğ¼Ğ°Ğ»Ğ¾ Ğ´Ğ»Ñ double Ğ¸ Ğ¾ĞºÑ€ÑƒĞ³Ğ»ÑĞµÑ‚ÑÑ Ğ´Ğ¾ 0

        Test("sqrt Ğ¾Ñ‚ Ğ½ÑƒĞ»Ñ", 
            "sqrt(0)", 0);

        Test("ln Ğ¾Ñ‚ e", 
            "round(ln(2.718281828) * 1000)", 1000);

        Test("Ğ”ĞµĞ»ĞµĞ½Ğ¸Ğµ Ğ½Ğ° Ğ¾Ñ‡ĞµĞ½ÑŒ Ğ¼Ğ°Ğ»Ğ¾Ğµ Ñ‡Ğ¸ÑĞ»Ğ¾", 
            "1 / 1e-10 > 1e9 ? 1 : 0", 1);

        Test("min Ñ Ğ¾Ğ´Ğ½Ğ¸Ğ¼ Ğ°Ñ€Ğ³ÑƒĞ¼ĞµĞ½Ñ‚Ğ¾Ğ¼", 
            "min(42)", 42);

        Test("max Ñ Ğ¾Ğ´Ğ½Ğ¸Ğ¼ Ğ°Ñ€Ğ³ÑƒĞ¼ĞµĞ½Ñ‚Ğ¾Ğ¼", 
            "max(42)", 42);

        Test("Ğ¤ÑƒĞ½ĞºÑ†Ğ¸Ñ Ğ¾Ñ‚ Ñ‚ĞµÑ€Ğ½Ğ°Ñ€Ğ½Ğ¾Ğ³Ğ¾", 
            "abs(1 > 0 ? -5 : 5)", 5);

        // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
        Console.WriteLine("\nâ•â•â• Ğ“Ğ Ğ£ĞŸĞŸĞ 7: Ğ¡Ğ¢Ğ ĞĞšĞ˜ - Ğ“Ğ ĞĞĞ˜Ğ§ĞĞ«Ğ• Ğ¡Ğ›Ğ£Ğ§ĞĞ˜ â•â•â•\n");
        // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

        Test("ĞŸÑƒÑÑ‚Ğ°Ñ ÑÑ‚Ñ€Ğ¾ĞºĞ°", 
            "len(\"\")", 0);

        Test("ĞšĞ¾Ğ½ĞºĞ°Ñ‚ĞµĞ½Ğ°Ñ†Ğ¸Ñ Ñ Ğ¿ÑƒÑÑ‚Ğ¾Ğ¹ ÑÑ‚Ñ€Ğ¾ĞºĞ¾Ğ¹", 
            "concat(\"Hello\", \"\")", "Hello");

        Test("substr Ñ Ğ½ÑƒĞ»ĞµĞ²Ğ¾Ğ¹ Ğ´Ğ»Ğ¸Ğ½Ğ¾Ğ¹", 
            "len(substr(\"Hello\", 0, 0))", 0);

        Test("substr Ğ·Ğ° Ğ³Ñ€Ğ°Ğ½Ğ¸Ñ†ĞµĞ¹ ÑÑ‚Ñ€Ğ¾ĞºĞ¸", 
            "len(substr(\"Hello\", 0, 100))", 5); // Ğ´Ğ¾Ğ»Ğ¶Ğ½Ğ¾ Ğ¾Ğ±Ñ€ĞµĞ·Ğ°Ñ‚ÑŒÑÑ Ğ´Ğ¾ 5

        Test("Ğ¡Ñ‚Ñ€Ğ¾ĞºĞ° Ğ² Ñ‚ĞµÑ€Ğ½Ğ°Ñ€Ğ½Ğ¾Ğ¼", 
            "s = \"Test\"; len(s) > 3 ? concat(s, \"!\") : s", "Test!");

        // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
        Console.WriteLine("\nâ•â•â• Ğ“Ğ Ğ£ĞŸĞŸĞ 8: Ğ¡ĞœĞ•Ğ¨ĞĞĞĞ«Ğ• Ğ¡Ğ¢Ğ˜Ğ›Ğ˜ â•â•â•\n");
        // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

        Test("Python-style if Ñ C-style for", 
            @"total = 0
for(i=0;i<3;i=i+1){
    if (i > 0):
        total = total + i
}
total", 3);

        Test("C-style if Ñ Python-style for (Ğ½Ğµ Ğ¿Ğ¾Ğ´Ğ´ĞµÑ€Ğ¶Ğ¸Ğ²Ğ°ĞµÑ‚ÑÑ)", 
            @"total = 0
for i = 0 to 2:
    if(i > 0){total = total + i}
total", true); // Ğ¡Ğ¼ĞµÑˆĞ°Ğ½Ğ½Ñ‹Ğ¹ ÑĞ¸Ğ½Ñ‚Ğ°ĞºÑĞ¸Ñ C-style {} Ğ²Ğ½ÑƒÑ‚Ñ€Ğ¸ Python-style : Ğ½Ğµ Ğ¿Ğ¾Ğ´Ğ´ĞµÑ€Ğ¶Ğ¸Ğ²Ğ°ĞµÑ‚ÑÑ

        Test("Ğ’Ğ»Ğ¾Ğ¶ĞµĞ½Ğ½Ñ‹Ğ¹ Python Ğ² C-style", 
            @"total = 0
for(i=0;i<3;i=i+1){
    for j = 0 to 2:
        total = total + 1
}
total", 9);

        // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
        Console.WriteLine("\nâ•â•â• Ğ“Ğ Ğ£ĞŸĞŸĞ 9: ĞšĞĞœĞŸĞ›Ğ•ĞšĞ¡ĞĞ«Ğ• Ğ§Ğ˜Ğ¡Ğ›Ğ - Ğ“Ğ ĞĞĞ˜Ğ§ĞĞ«Ğ• Ğ¡Ğ›Ğ£Ğ§ĞĞ˜ â•â•â•\n");
        // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

        Test("i^2", 
            "i ^ 2", -1);

        Test("i^3", 
            "result = i * i * i; abs(result) < 0.01 ? 0 : -1", -1); // i^3 = -i, abs(-i) = 1, Ğ½Ğµ < 0.01, Ñ€ĞµĞ·ÑƒĞ»ÑŒÑ‚Ğ°Ñ‚ -1

        Test("ĞšĞ¾Ğ¼Ğ¿Ğ»ĞµĞºÑĞ½Ğ¾Ğµ ÑĞ»Ğ¾Ğ¶ĞµĞ½Ğ¸Ğµ", 
            "abs((1 + i) + (1 - i))", 2); // (1+i) + (1-i) = 2+0i, |2| = 2

        Test("ĞšĞ¾Ğ¼Ğ¿Ğ»ĞµĞºÑĞ½Ğ¾Ğµ ÑƒĞ¼Ğ½Ğ¾Ğ¶ĞµĞ½Ğ¸Ğµ", 
            "(1 + i) * (1 - i)", 2); // (1+i)(1-i) = 1 - i^2 = 1 - (-1) = 2

        // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
        Console.WriteLine("\nâ•â•â• Ğ“Ğ Ğ£ĞŸĞŸĞ 10: Ğ­ĞšĞ¡Ğ¢Ğ Ğ•ĞœĞĞ›Ğ¬ĞĞ«Ğ• Ğ—ĞĞĞ§Ğ•ĞĞ˜Ğ¯ â•â•â•\n");
        // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

        Test("ĞÑ‡ĞµĞ½ÑŒ Ğ±Ğ¾Ğ»ÑŒÑˆĞ¾Ğµ Ñ‡Ğ¸ÑĞ»Ğ¾", 
            "1e100 > 1e99 ? 1 : 0", 1);

        Test("ĞÑ‡ĞµĞ½ÑŒ Ğ¼Ğ°Ğ»Ğ¾Ğµ Ñ‡Ğ¸ÑĞ»Ğ¾", 
            "1e-100 > 0 ? 1 : 0", 1);

        Test("Ğ”ĞµĞ»ĞµĞ½Ğ¸Ğµ Ğ½Ğ° ĞµĞ´Ğ¸Ğ½Ğ¸Ñ†Ñƒ", 
            "1000000 / 1", 1000000);

        Test("Ğ£Ğ¼Ğ½Ğ¾Ğ¶ĞµĞ½Ğ¸Ğµ Ğ½Ğ° Ğ½Ğ¾Ğ»ÑŒ", 
            "1e100 * 0", 0);

        Test("ĞĞ¾Ğ»ÑŒ Ğ² ÑÑ‚ĞµĞ¿ĞµĞ½Ğ¸ Ğ½Ğ¾Ğ»ÑŒ", 
            "0 ^ 0", 1); // Ğ¼Ğ°Ñ‚ĞµĞ¼Ğ°Ñ‚Ğ¸Ñ‡ĞµÑĞºĞ¸ Ğ½ĞµĞ¾Ğ¿Ñ€ĞµĞ´ĞµĞ»ĞµĞ½Ğ¾, Ğ½Ğ¾ Ğ¾Ğ±Ñ‹Ñ‡Ğ½Ğ¾ 1

        Test("ĞÑ‚Ñ€Ğ¸Ñ†Ğ°Ñ‚ĞµĞ»ÑŒĞ½Ğ¾Ğµ Ğ² Ñ‡ĞµÑ‚Ğ½ÑƒÑ ÑÑ‚ĞµĞ¿ĞµĞ½ÑŒ", 
            "(-2) ^ 4", 16);

        Test("Ğ¤Ğ°ĞºÑ‚Ğ¾Ñ€Ğ¸Ğ°Ğ» Ğ¾Ñ‚ Ğ½ÑƒĞ»Ñ", 
            "fact(0)", 1);

        // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
        Console.WriteLine("\nâ•â•â• Ğ“Ğ Ğ£ĞŸĞŸĞ 11: Ğ¢Ğ ĞĞĞ¡Ğ¦Ğ•ĞĞ”Ğ•ĞĞ¢ĞĞ«Ğ• Ğ£Ğ ĞĞ’ĞĞ•ĞĞ˜Ğ¯ â•â•â•\n");
        // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

        Test("Ğ¢Ñ€Ğ°Ğ½ÑÑ†ĞµĞ½Ğ´ĞµĞ½Ñ‚Ğ½Ğ¾Ğµ ÑƒÑ€Ğ°Ğ²Ğ½ĞµĞ½Ğ¸Ğµ - ĞºĞ¾Ñ€ĞµĞ½ÑŒ 1", 
            "x = 233.95812; x^2 - 233*x/sin(x)", -0.0012670925425481983, 0.000001);

        Test("Ğ¢Ñ€Ğ°Ğ½ÑÑ†ĞµĞ½Ğ´ĞµĞ½Ñ‚Ğ½Ğ¾Ğµ ÑƒÑ€Ğ°Ğ²Ğ½ĞµĞ½Ğ¸Ğµ - ĞºĞ¾Ñ€ĞµĞ½ÑŒ 2", 
            "x = 234.147705; x^2 - 233*x/sin(x)", -0.002311379896127619, 0.000001);

        Test("Ğ¢Ñ€Ğ°Ğ½ÑÑ†ĞµĞ½Ğ´ĞµĞ½Ñ‚Ğ½Ğ¾Ğµ ÑƒÑ€Ğ°Ğ²Ğ½ĞµĞ½Ğ¸Ğµ - ĞºĞ¾Ñ€ĞµĞ½ÑŒ 3", 
            "x = 467.575651; x^2 - 233*x/sin(x)", 0.03497644906747155, 0.000001);

        // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
        // Ğ˜Ğ¢ĞĞ“Ğ˜
        // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

        Console.WriteLine("\nâ•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—");
        Console.WriteLine($"â•‘  Ğ˜Ğ¢ĞĞ“Ğ˜: {passedTests}/{totalTests} Ñ‚ĞµÑÑ‚Ğ¾Ğ² Ğ¿Ñ€Ğ¾Ğ¹Ğ´ĞµĞ½Ğ¾ ({100.0 * passedTests / totalTests:F1}%)");
        Console.WriteLine($"â•‘  âœ… Ğ£ÑĞ¿ĞµÑˆĞ½Ñ‹Ñ…: {passedTests}");
        Console.WriteLine($"â•‘  âŒ ĞŸÑ€Ğ¾Ğ²Ğ°Ğ»ĞµĞ½Ğ¾: {failedTests}");
        Console.WriteLine("â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•\n");

        if (failedTests == 0)
        {
            Console.WriteLine("ğŸ‰ Ğ’Ğ¡Ğ• ĞšĞĞ’Ğ•Ğ Ğ—ĞĞ«Ğ• Ğ¢Ğ•Ğ¡Ğ¢Ğ« ĞŸĞ ĞĞ™Ğ”Ğ•ĞĞ«! ğŸ‰");
        }
        else
        {
            Console.WriteLine($"âš ï¸  {failedTests} Ñ‚ĞµÑÑ‚Ğ¾Ğ² Ğ¿Ñ€Ğ¾Ğ²Ğ°Ğ»ĞµĞ½Ğ¾ - Ñ‚Ñ€ĞµĞ±ÑƒĞµÑ‚ÑÑ Ğ¸ÑĞ¿Ñ€Ğ°Ğ²Ğ»ĞµĞ½Ğ¸Ğµ!");
        }
    }

    // ĞŸĞµÑ€ĞµĞ³Ñ€ÑƒĞ·ĞºĞ° Ğ´Ğ»Ñ Ñ‚ĞµÑÑ‚Ğ¾Ğ², Ğ¾Ğ¶Ğ¸Ğ´Ğ°ÑÑ‰Ğ¸Ñ… Ğ¾ÑˆĞ¸Ğ±ĞºÑƒ
    static void Test(string name, string script, bool expectError)
    {
        Test(name, script, null, 0.0001, expectError);
    }

    static void Test(string name, string script, object expected, double tolerance = 0.0001, bool expectError = false)
    {
        totalTests++;
        var processor = new Processor();
        
        Console.WriteLine($"[{totalTests}] {name}");
        Console.WriteLine($"    ğŸ“ Ğ¡ĞºÑ€Ğ¸Ğ¿Ñ‚: {script.Replace("\n", "\\n")}");
        
        try
        {
            var output = processor.Run(script);
            var hasError = output.Any(line => line.Contains("ĞšĞ Ğ˜Ğ¢Ğ˜Ğ§Ğ•Ğ¡ĞšĞĞ¯ ĞĞ¨Ğ˜Ğ‘ĞšĞ") || line.Contains("ĞĞ¨Ğ˜Ğ‘ĞšĞ"));

            if (expectError)
            {
                if (hasError)
                {
                    Console.WriteLine("    âœ… ĞĞ–Ğ˜Ğ”ĞĞ•ĞœĞĞ¯ ĞĞ¨Ğ˜Ğ‘ĞšĞ");
                    passedTests++;
                }
                else
                {
                    Console.WriteLine($"    âŒ ĞĞ–Ğ˜Ğ”ĞĞ›ĞĞ¡Ğ¬ ĞĞ¨Ğ˜Ğ‘ĞšĞ, Ğ½Ğ¾ Ğ¿Ğ¾Ğ»ÑƒÑ‡ĞµĞ½ Ñ€ĞµĞ·ÑƒĞ»ÑŒÑ‚Ğ°Ñ‚: {output.LastOrDefault()}");
                    failedTests++;
                }
                return;
            }

            if (hasError)
            {
                Console.WriteLine($"    âŒ ĞĞ¨Ğ˜Ğ‘ĞšĞ: {output.LastOrDefault()}");
                failedTests++;
                return;
            }

            var lastLine = output.LastOrDefault();
            if (lastLine == null)
            {
                Console.WriteLine("    âŒ ĞĞµÑ‚ Ñ€ĞµĞ·ÑƒĞ»ÑŒÑ‚Ğ°Ñ‚Ğ°");
                failedTests++;
                return;
            }

            // Ğ˜Ğ·Ğ²Ğ»ĞµĞºĞ°ĞµĞ¼ Ñ€ĞµĞ·ÑƒĞ»ÑŒÑ‚Ğ°Ñ‚
            var resultMatch = System.Text.RegularExpressions.Regex.Match(lastLine, @"=> (.+)");
            if (!resultMatch.Success)
            {
                Console.WriteLine($"    âŒ ĞĞµ ÑƒĞ´Ğ°Ğ»Ğ¾ÑÑŒ Ğ¸Ğ·Ğ²Ğ»ĞµÑ‡ÑŒ Ñ€ĞµĞ·ÑƒĞ»ÑŒÑ‚Ğ°Ñ‚ Ğ¸Ğ·: {lastLine}");
                failedTests++;
                return;
            }

            var resultStr = resultMatch.Groups[1].Value.Trim();
            
            // ĞŸÑ€Ğ¾Ğ²ĞµÑ€ĞºĞ° ÑÑ‚Ñ€Ğ¾Ğº
            if (expected is string expectedStr)
            {
                if (resultStr == expectedStr)
                {
                    Console.WriteLine($"    âœ… ĞŸĞ ĞĞ¨Ğ•Ğ›: {resultStr}");
                    passedTests++;
                }
                else
                {
                    Console.WriteLine($"    âŒ ĞŸĞ ĞĞ’ĞĞ›Ğ•Ğ: Ğ¾Ğ¶Ğ¸Ğ´Ğ°Ğ»Ğ¾ÑÑŒ '{expectedStr}', Ğ¿Ğ¾Ğ»ÑƒÑ‡ĞµĞ½Ğ¾ '{resultStr}'");
                    failedTests++;
                }
                return;
            }

            // ĞŸĞ°Ñ€ÑĞ¸Ğ¼ Ñ‡Ğ¸ÑĞ»Ğ¾ (Ğ¼Ğ¾Ğ¶ĞµÑ‚ Ğ±Ñ‹Ñ‚ÑŒ Ğ´Ñ€Ğ¾Ğ±ÑŒ Ğ¸Ğ»Ğ¸ ĞºĞ¾Ğ¼Ğ¿Ğ»ĞµĞºÑĞ½Ğ¾Ğµ)
            var resultParts = resultStr.Split(new[] { "  [" }, StringSplitOptions.None);
            var resultValue = resultParts[0].Trim();

            if (double.TryParse(resultValue, System.Globalization.NumberStyles.Any, 
                System.Globalization.CultureInfo.InvariantCulture, out double result))
            {
                double expectedNum = Convert.ToDouble(expected);
                if (Math.Abs(result - expectedNum) <= tolerance)
                {
                    Console.WriteLine($"    âœ… ĞŸĞ ĞĞ¨Ğ•Ğ›: {result}");
                    passedTests++;
                }
                else
                {
                    Console.WriteLine($"    âŒ ĞŸĞ ĞĞ’ĞĞ›Ğ•Ğ: Ğ¾Ğ¶Ğ¸Ğ´Ğ°Ğ»Ğ¾ÑÑŒ {expectedNum}, Ğ¿Ğ¾Ğ»ÑƒÑ‡ĞµĞ½Ğ¾ {result}");
                    failedTests++;
                }
            }
            else
            {
                Console.WriteLine($"    âŒ ĞĞµ ÑƒĞ´Ğ°Ğ»Ğ¾ÑÑŒ Ñ€Ğ°ÑĞ¿Ğ°Ñ€ÑĞ¸Ñ‚ÑŒ Ñ€ĞµĞ·ÑƒĞ»ÑŒÑ‚Ğ°Ñ‚: {resultValue}");
                failedTests++;
            }
        }
        catch (Exception ex)
        {
            if (expectError)
            {
                Console.WriteLine($"    âœ… ĞĞ–Ğ˜Ğ”ĞĞ•ĞœĞĞ¯ ĞĞ¨Ğ˜Ğ‘ĞšĞ: {ex.Message}");
                passedTests++;
            }
            else
            {
                Console.WriteLine($"    âŒ Ğ˜Ğ¡ĞšĞ›Ğ®Ğ§Ğ•ĞĞ˜Ğ•: {ex.Message}");
                failedTests++;
            }
        }
    }
}

