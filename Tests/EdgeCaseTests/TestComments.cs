using AI.ClassicMath.Calculator.ProcessorLogic;
using System;
using System.Linq;

namespace EdgeCaseTests;

/// <summary>
/// –¢–µ—Å—Ç—ã –ø–æ–¥–¥–µ—Ä–∂–∫–∏ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤ –≤ —Å—Ç–∏–ª–µ Python (#)
/// </summary>
class TestComments
{
    static int passedTests = 0;
    static int failedTests = 0;
    static int totalTests = 0;

    static void Test(string testName, string script, double? expected, double precision = 1e-10)
    {
        totalTests++;
        try
        {
            var processor = new Processor();
            var output = processor.Run(script);
            var hasError = output.Any(line => line.Contains("–ö–†–ò–¢–ò–ß–ï–°–ö–ê–Ø –û–®–ò–ë–ö–ê") || line.Contains("–û–®–ò–ë–ö–ê"));

            if (hasError)
            {
                failedTests++;
                Console.WriteLine($"‚ùå {testName}");
                Console.WriteLine($"   –û—à–∏–±–∫–∞ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è");
                foreach (var line in output)
                {
                    Console.WriteLine($"   {line}");
                }
                return;
            }

            // –ù–∞—Ö–æ–¥–∏–º —Ä–µ–∑—É–ª—å—Ç–∞—Ç (–ø–æ—Å–ª–µ–¥–Ω—è—è —Å—Ç—Ä–æ–∫–∞ —Å "=>")
            double? result = null;
            foreach (var line in output)
            {
                if (line.Contains("=>"))
                {
                    var parts = line.Split(new[] { "=>" }, StringSplitOptions.None);
                    if (parts.Length == 2)
                    {
                        var valueStr = parts[1].Trim().Split(new[] { ' ', '[' })[0];
                        if (double.TryParse(valueStr, System.Globalization.NumberStyles.Any, System.Globalization.CultureInfo.InvariantCulture, out var val))
                        {
                            result = val;
                        }
                    }
                }
            }

            bool passed;
            if (expected == null && result == null)
            {
                passed = true;
            }
            else if (expected == null || result == null)
            {
                passed = false;
            }
            else
            {
                passed = Math.Abs(result.Value - expected.Value) < precision;
            }

            if (passed)
            {
                passedTests++;
                Console.WriteLine($"‚úÖ {testName}");
            }
            else
            {
                failedTests++;
                Console.WriteLine($"‚ùå {testName}");
                Console.WriteLine($"   Expected: {expected}, Got: {result}");
            }
        }
        catch (Exception ex)
        {
            failedTests++;
            Console.WriteLine($"‚ùå {testName}");
            Console.WriteLine($"   Exception: {ex.Message}");
        }
    }

    static void Main(string[] args)
    {
        Console.WriteLine("=== –¢–ï–°–¢–´ –ü–û–î–î–ï–†–ñ–ö–ò –ö–û–ú–ú–ï–ù–¢–ê–†–ò–ï–í (#) ===\n");

        // –¢–µ—Å—Ç 1: –ü—Ä–æ—Å—Ç–æ–π –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π –≤ –Ω–∞—á–∞–ª–µ —Å—Ç—Ä–æ–∫–∏
        Test("–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π –≤ –Ω–∞—á–∞–ª–µ —Å—Ç—Ä–æ–∫–∏",
            @"# –≠—Ç–æ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π
x = 5
x * 2",
            10.0);

        // –¢–µ—Å—Ç 2: Inline –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π
        Test("Inline –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π",
            @"x = 5  # –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –∑–Ω–∞—á–µ–Ω–∏–µ
y = x * 2  # –£–º–Ω–æ–∂–∞–µ–º –Ω–∞ 2
y + 3  # –î–æ–±–∞–≤–ª—è–µ–º 3",
            13.0);

        // –¢–µ—Å—Ç 3: –§–∏–∑–∏—á–µ—Å–∫–∞—è –∑–∞–¥–∞—á–∞ —Å –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏—è–º–∏
        Test("–§–∏–∑–∏—á–µ—Å–∫–∞—è –∑–∞–¥–∞—á–∞ —Å –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏—è–º–∏",
            @"# –ö–æ–Ω—Å—Ç–∞–Ω—Ç—ã –∑–∞–¥–∞—á–∏
M = 2
m = 1
V0 = 2
k = 27
mu = 0.3
g = 10
pi_val = 3

# 1) –†–∞—Å—á–µ—Ç —Å–∂–∞—Ç–∏—è x1 –ø—Ä–∏ –Ω–∞—á–∞–ª–µ –ø—Ä–æ—Å–∫–∞–ª—å–∑—ã–≤–∞–Ω–∏—è
x1 = (mu * g * (M + m)) / k
x1",
            1.0 / 3.0, 1e-8);  // –£–º–µ–Ω—å—à–µ–Ω–∞ —Ç–æ—á–Ω–æ—Å—Ç—å –¥–æ 1e-8

        // –¢–µ—Å—Ç 4: –ú–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏
        Test("–ú–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏",
            @"# –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π 1
# –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π 2
# –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π 3
x = 10  # –ó–Ω–∞—á–µ–Ω–∏–µ x
y = 20  # –ó–Ω–∞—á–µ–Ω–∏–µ y
x + y  # –°—É–º–º–∞",
            30.0);

        // –¢–µ—Å—Ç 5: –¢–æ–ª—å–∫–æ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ (–ø—É—Å—Ç–æ–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç)
        Test("–¢–æ–ª—å–∫–æ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏",
            @"# –¢–æ–ª—å–∫–æ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏
# –ù–∏—á–µ–≥–æ –Ω–µ –≤—ã—á–∏—Å–ª—è–µ–º",
            null);

        // –¢–µ—Å—Ç 6: –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π —Å —Ñ–æ—Ä–º—É–ª–∞–º–∏
        Test("–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π —Å —Ñ–æ—Ä–º—É–ª–∞–º–∏",
            @"# –†–∞—Å—á–µ—Ç: omega = sqrt(k / (M + m))
M = 2
m = 1
k = 27
omega = sqrt(k / (M + m))  # –¶–∏–∫–ª–∏—á–µ—Å–∫–∞—è —á–∞—Å—Ç–æ—Ç–∞
omega",
            3.0, 1e-8);  // –£–º–µ–Ω—å—à–µ–Ω–∞ —Ç–æ—á–Ω–æ—Å—Ç—å –¥–æ 1e-8

        // –¢–µ—Å—Ç 7: –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π –≤ —Å–µ—Ä–µ–¥–∏–Ω–µ —Å–∫—Ä–∏–ø—Ç–∞
        Test("–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π –≤ —Å–µ—Ä–µ–¥–∏–Ω–µ",
            @"x = 5
# –ü—Ä–æ–º–µ–∂—É—Ç–æ—á–Ω—ã–π –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π
y = 10
# –ï—â–µ –æ–¥–∏–Ω –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π
x + y",
            15.0);

        // –¢–µ—Å—Ç 8: # –≤–Ω—É—Ç—Ä–∏ —Å—Ç—Ä–æ–∫–∏ –ù–ï –¥–æ–ª–∂–µ–Ω —É–¥–∞–ª—è—Ç—å—Å—è
        Test("# –≤–Ω—É—Ç—Ä–∏ —Å—Ç—Ä–æ–∫–æ–≤–æ–≥–æ –ª–∏—Ç–µ—Ä–∞–ª–∞",
            @"s = ""Test#123""
len(s)",
            8.0);

        // –¢–µ—Å—Ç 9: –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π –ø–æ—Å–ª–µ –æ–ø–µ—Ä–∞—Ç–æ—Ä–∞
        Test("–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π –ø–æ—Å–ª–µ –æ–ø–µ—Ä–∞—Ç–æ—Ä–∞",
            @"x = 10 + 5  # –°–ª–æ–∂–µ–Ω–∏–µ
y = x * 2  # –£–º–Ω–æ–∂–µ–Ω–∏–µ
y",
            30.0);

        // –¢–µ—Å—Ç 10: –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π –≤ —Ü–∏–∫–ª–µ
        Test("–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π –≤ —Ü–∏–∫–ª–µ",
            @"total = 0
for i = 0 to 3:  # –¶–∏–∫–ª –æ—Ç 0 –¥–æ 3
    # –ù–∞–∫–∞–ø–ª–∏–≤–∞–µ–º —Å—É–º–º—É
    total = total + i  # –î–æ–±–∞–≤–ª—è–µ–º i
total",
            6.0);

        // –¢–µ—Å—Ç 11: –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π –≤ —É—Å–ª–æ–≤–∏–∏ if
        Test("–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π –≤ if",
            @"x = 5
# –ü—Ä–æ–≤–µ—Ä–∫–∞ —É—Å–ª–æ–≤–∏—è
if x > 3:  # –ï—Å–ª–∏ –±–æ–ª—å—à–µ 3
    result = 100  # –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º 100
else:  # –ò–Ω–∞—á–µ
    result = 50  # –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º 50
result",
            100.0);

        // –¢–µ—Å—Ç 12: –ú–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ # –≤ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏
        Test("–ú–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ # –≤ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏",
            @"x = 10  ### –í–∞–∂–Ω—ã–π –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π ###
y = 20  # –ï—â–µ –æ–¥–∏–Ω # –≤–Ω—É—Ç—Ä–∏ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏—è #
x + y",
            30.0);

        // –¢–µ—Å—Ç 13: –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π –±–µ–∑ –ø—Ä–æ–±–µ–ª–∞ –ø–æ—Å–ª–µ #
        Test("–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π –±–µ–∑ –ø—Ä–æ–±–µ–ª–∞",
            @"x = 5 #–±–µ–∑ –ø—Ä–æ–±–µ–ª–∞
y = 10#—Ç–æ–∂–µ –±–µ–∑ –ø—Ä–æ–±–µ–ª–∞
x + y",
            15.0);

        // –¢–µ—Å—Ç 14: –ü—Ä–æ–±–µ–ª—ã –ø–µ—Ä–µ–¥ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–º
        Test("–ü—Ä–æ–±–µ–ª—ã –ø–µ—Ä–µ–¥ #",
            @"x = 5      # –ú–Ω–æ–≥–æ –ø—Ä–æ–±–µ–ª–æ–≤ –ø–µ—Ä–µ–¥ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–º
y = 10	# –¢–∞–±—É–ª—è—Ü–∏—è –ø–µ—Ä–µ–¥ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–º
x + y",
            15.0);

        // –¢–µ—Å—Ç 15: –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π –≤ –º–∞—Å—Å–∏–≤–µ
        Test("–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π —Å –º–∞—Å—Å–∏–≤–æ–º",
            @"# –°–æ–∑–¥–∞–µ–º –º–∞—Å—Å–∏–≤
arr = [1, 2, 3]  # –¢—Ä–∏ —ç–ª–µ–º–µ–Ω—Ç–∞
# –í—ã—á–∏—Å–ª—è–µ–º —Å—É–º–º—É
sum(arr)  # –†–µ–∑—É–ª—å—Ç–∞—Ç",
            6.0);

        // –¢–µ—Å—Ç 16: –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π —Å —Ñ—É–Ω–∫—Ü–∏—è–º–∏
        Test("–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π —Å —Ñ—É–Ω–∫—Ü–∏—è–º–∏",
            @"# –ò—Å–ø–æ–ª—å–∑—É–µ–º –º–∞—Ç–µ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ —Ñ—É–Ω–∫—Ü–∏–∏
x = sqrt(16)  # –ö–æ—Ä–µ–Ω—å –∏–∑ 16
y = abs(-5)  # –ú–æ–¥—É–ª—å -5
x + y  # –°—É–º–º–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤",
            9.0);

        // –¢–µ—Å—Ç 17: –°—Ç—Ä–æ–∫–∞ —Å escaped –∫–∞–≤—ã—á–∫–∞–º–∏ –∏ #
        Test("–°—Ç—Ä–æ–∫–∞ —Å –∫–∞–≤—ã—á–∫–∞–º–∏ –∏ #",
            @"s1 = ""Test""  # –ü—Ä–æ—Å—Ç–∞—è —Å—Ç—Ä–æ–∫–∞
s2 = ""Hash#Tag""  # –°—Ç—Ä–æ–∫–∞ —Å —Ö—ç—à—Ç–µ–≥–æ–º
len(s1) + len(s2)",
            12.0);

        // –¢–µ—Å—Ç 18: –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π –≤ —Ç–µ—Ä–Ω–∞—Ä–Ω–æ–º –æ–ø–µ—Ä–∞—Ç–æ—Ä–µ
        Test("–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π –≤ —Ç–µ—Ä–Ω–∞—Ä–Ω–æ–º",
            @"x = 5  # –ó–Ω–∞—á–µ–Ω–∏–µ x
# –¢–µ—Ä–Ω–∞—Ä–Ω—ã–π –æ–ø–µ—Ä–∞—Ç–æ—Ä —Å –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏—è–º–∏
result = x > 3 ? 100 : 50  # –í—ã–±–æ—Ä –∑–Ω–∞—á–µ–Ω–∏—è
result",
            100.0);

        // –¢–µ—Å—Ç 19: –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ –≤–æ–∫—Ä—É–≥ –º–∞—Ç–µ–º–∞—Ç–∏—á–µ—Å–∫–∏—Ö –æ–ø–µ—Ä–∞—Ü–∏–π
        Test("–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ –≤–æ–∫—Ä—É–≥ –æ–ø–µ—Ä–∞—Ü–∏–π",
            @"# –°–ª–æ–∂–Ω—ã–µ –≤—ã—á–∏—Å–ª–µ–Ω–∏—è
a = 2  # –ü–µ—Ä–≤–æ–µ —á–∏—Å–ª–æ
b = 3  # –í—Ç–æ—Ä–æ–µ —á–∏—Å–ª–æ
c = a ^ b  # –í–æ–∑–≤–µ–¥–µ–Ω–∏–µ –≤ —Å—Ç–µ–ø–µ–Ω—å (2^3 = 8)
d = c * 2  # –£–º–Ω–æ–∂–µ–Ω–∏–µ (8 * 2 = 16)
d + 4  # –î–æ–±–∞–≤–ª–µ–Ω–∏–µ 4 (16 + 4 = 20)",
            20.0);

        // –¢–µ—Å—Ç 20: –ü—É—Å—Ç—ã–µ —Å—Ç—Ä–æ–∫–∏ –∏ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏
        Test("–ü—É—Å—Ç—ã–µ —Å—Ç—Ä–æ–∫–∏ —Å –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏—è–º–∏",
            @"x = 5

# –ü—É—Å—Ç–∞—è —Å—Ç—Ä–æ–∫–∞ –≤—ã—à–µ

y = 10  # –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π

# –ï—â–µ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏

x + y",
            15.0);

        // –¢–µ—Å—Ç 21: –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π –ø–æ—Å–ª–µ –∑–∞–∫—Ä—ã–≤–∞—é—â–µ–π —Å–∫–æ–±–∫–∏
        Test("–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π –ø–æ—Å–ª–µ —Å–∫–æ–±–æ–∫",
            @"x = (5 + 3) * 2  # –ü–æ—Å–ª–µ —Å–∫–æ–±–æ–∫
y = abs(-10)  # –ü–æ—Å–ª–µ —Ñ—É–Ω–∫—Ü–∏–∏
x + y",
            26.0);

        // –¢–µ—Å—Ç 22: –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π —Å while —Ü–∏–∫–ª–æ–º
        Test("–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π –≤ while",
            @"# –¶–∏–∫–ª while
i = 0  # –°—á–µ—Ç—á–∏–∫
total = 0  # –°—É–º–º–∞
while i < 5:  # –ü–æ–∫–∞ –º–µ–Ω—å—à–µ 5
    total = total + i  # –ù–∞–∫–∞–ø–ª–∏–≤–∞–µ–º
    i = i + 1  # –£–≤–µ–ª–∏—á–∏–≤–∞–µ–º —Å—á–µ—Ç—á–∏–∫
total  # –†–µ–∑—É–ª—å—Ç–∞—Ç",
            10.0);

        // –¢–µ—Å—Ç 23: –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π —Å –±–∏—Ç–æ–≤—ã–º–∏ –æ–ø–µ—Ä–∞—Ü–∏—è–º–∏
        Test("–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π —Å –±–∏—Ç–æ–≤—ã–º–∏",
            @"# –ë–∏—Ç–æ–≤—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏
a = 5  # 101 –≤ –¥–≤–æ–∏—á–Ω–æ–π
b = 3  # 011 –≤ –¥–≤–æ–∏—á–Ω–æ–π
c = a & b  # AND: 001 = 1
d = a | b  # OR: 111 = 7
c + d  # 1 + 7 = 8",
            8.0);

        // –¢–µ—Å—Ç 24: –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π —Å –Ω–∞—É—á–Ω–æ–π –Ω–æ—Ç–∞—Ü–∏–µ–π
        Test("–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π —Å –Ω–∞—É—á–Ω–æ–π –Ω–æ—Ç–∞—Ü–∏–µ–π",
            @"# –ù–∞—É—á–Ω–∞—è –Ω–æ—Ç–∞—Ü–∏—è
x = 1e3  # 1000
y = 2e-2  # 0.02
x * y  # 1000 * 0.02 = 20",
            20.0);

        // –¢–µ—Å—Ç 25: –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π –≤ —Å–ª–æ–∂–Ω–æ–º –≤—ã—Ä–∞–∂–µ–Ω–∏–∏
        Test("–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π –≤ —Å–ª–æ–∂–Ω–æ–º –≤—ã—Ä–∞–∂–µ–Ω–∏–∏",
            @"# –°–ª–æ–∂–Ω–æ–µ –≤—ã—Ä–∞–∂–µ–Ω–∏–µ
x = 5
y = 3
# –ò—Å–ø–æ–ª—å–∑—É–µ–º —Ç–µ—Ä–Ω–∞—Ä–Ω—ã–π, —Ñ—É–Ω–∫—Ü–∏–∏ –∏ –æ–ø–µ—Ä–∞—Ü–∏–∏
result = (x > y ? max(x, y) : min(x, y)) + abs(x - y)  # –ú–∞–∫—Å–∏–º—É–º + —Ä–∞–∑–Ω–æ—Å—Ç—å
result",
            7.0);

        // –¢–µ—Å—Ç 26: –ö–†–ò–¢–ò–ß–ï–°–ö–ò–ô - –∫–æ–¥ –ù–ï –¥–æ–ª–∂–µ–Ω –æ–±—Ä–µ–∑–∞—Ç—å—Å—è –≤–º–µ—Å—Ç–µ —Å –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–º
        Test("–ö–æ–¥ –Ω–µ –æ–±—Ä–µ–∑–∞–µ—Ç—Å—è —Å –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–º",
            @"a = 3 # –ü–µ—Ä–µ–º–µ–Ω–Ω–∞—è a
b = 5 # –ü–µ—Ä–µ–º–µ–Ω–Ω–∞—è b
c = a + b # –°—É–º–º–∞
c",
            8.0);

        // –¢–µ—Å—Ç 27: –ö–†–ò–¢–ò–ß–ï–°–ö–ò–ô - –ø—Ä–æ–≤–µ—Ä–∫–∞ —á—Ç–æ –∫–æ–¥ –ø–æ—Å–ª–µ # —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è
        Test("–ú–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ —Å –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏—è–º–∏",
            @"x1 = 10 # –ü–µ—Ä–≤–∞—è
x2 = 20 # –í—Ç–æ—Ä–∞—è
x3 = 30 # –¢—Ä–µ—Ç—å—è
x4 = 40 # –ß–µ—Ç–≤–µ—Ä—Ç–∞—è
x1 + x2 + x3 + x4",
            100.0);

        // –¢–µ—Å—Ç 28: –ö–†–ò–¢–ò–ß–ï–°–ö–ò–ô - —Å—Ç—Ä–æ–∫–∏ –Ω–µ –¥–æ–ª–∂–Ω—ã —Ç–µ—Ä—è—Ç—å —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ
        Test("–°—Ç—Ä–æ–∫–∏ —Å # –Ω–µ —Ç–µ—Ä—è—é—Ç —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ",
            @"s1 = ""Hello#World"" # –°—Ç—Ä–æ–∫–∞ —Å —Ö—ç—à—Ç–µ–≥–æ–º
s2 = ""Test""  # –û–±—ã—á–Ω–∞—è —Å—Ç—Ä–æ–∫–∞
s3 = ""#Start""  # –ù–∞—á–∏–Ω–∞–µ—Ç—Å—è —Å #
len(concat(s1, s2, s3))",
            21.0);  // "Hello#World" (11) + "Test" (4) + "#Start" (6) = 21

        // –¢–µ—Å—Ç 29: –ö–†–ò–¢–ò–ß–ï–°–ö–ò–ô - –≤—ã—Ä–∞–∂–µ–Ω–∏—è –ø–æ—Å–ª–µ # –≤ —Å—Ç—Ä–æ–∫–∞—Ö
        Test("–°–ª–æ–∂–Ω—ã–µ —Å—Ç—Ä–æ–∫–∏ —Å #",
            @"name = ""User#123"" # ID –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
tag = ""#–≤–∞–∂–Ω–æ""  # –¢–µ–≥
len(name) + len(tag)",
            14.0);  // "User#123" (8) + "#–≤–∞–∂–Ω–æ" (6) = 14

        // –¢–µ—Å—Ç 30: –ö–†–ò–¢–ò–ß–ï–°–ö–ò–ô - –º–∞—Ç–µ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ –Ω–µ –æ–±—Ä–µ–∑–∞—é—Ç—Å—è
        Test("–û–ø–µ—Ä–∞—Ü–∏–∏ –Ω–µ –æ–±—Ä–µ–∑–∞—é—Ç—Å—è",
            @"result1 = 2 * 3 # –£–º–Ω–æ–∂–µ–Ω–∏–µ
result2 = 10 / 2 # –î–µ–ª–µ–Ω–∏–µ
result3 = 5 + 5 # –°–ª–æ–∂–µ–Ω–∏–µ
result4 = 20 - 5 # –í—ã—á–∏—Ç–∞–Ω–∏–µ
result1 + result2 + result3 + result4",
            36.0);

        // –¢–µ—Å—Ç 31: –ö–†–ò–¢–ò–ß–ï–°–ö–ò–ô - —Ñ—É–Ω–∫—Ü–∏–∏ –Ω–µ –æ–±—Ä–µ–∑–∞—é—Ç—Å—è
        Test("–§—É–Ω–∫—Ü–∏–∏ –Ω–µ –æ–±—Ä–µ–∑–∞—é—Ç—Å—è",
            @"val1 = sqrt(16) # –ö–æ—Ä–µ–Ω—å
val2 = abs(-10) # –ú–æ–¥—É–ª—å
val3 = max(5, 3) # –ú–∞–∫—Å–∏–º—É–º
val1 + val2 + val3",
            19.0);

        // –¢–µ—Å—Ç 32: –ö–†–ò–¢–ò–ß–ï–°–ö–ò–ô - –º–∞—Å—Å–∏–≤—ã –Ω–µ –æ–±—Ä–µ–∑–∞—é—Ç—Å—è
        Test("–ú–∞—Å—Å–∏–≤—ã –Ω–µ –æ–±—Ä–µ–∑–∞—é—Ç—Å—è",
            @"arr1 = [1, 2, 3] # –ü–µ—Ä–≤—ã–π –º–∞—Å—Å–∏–≤
arr2 = [4, 5, 6] # –í—Ç–æ—Ä–æ–π –º–∞—Å—Å–∏–≤
sum(arr1) + sum(arr2)",
            21.0);

        // –¢–µ—Å—Ç 33: –ö–†–ò–¢–ò–ß–ï–°–ö–ò–ô - —Å—Ç—Ä–æ–∫–∞ —Å escaped backslash –ø–µ—Ä–µ–¥ –∫–∞–≤—ã—á–∫–æ–π
        Test("Escaped backslash + –∫–∞–≤—ã—á–∫–∞",
            @"s = ""Path: C:\\folder\\file.txt""  # –ü—É—Ç—å Windows
len(s)",
            26.0);  // "Path: C:\folder\file.txt" = 26 —Å–∏–º–≤–æ–ª–æ–≤ (backslash –Ω–µ escaped –≤ runtime)

        // –¢–µ—Å—Ç 34: –ö–†–ò–¢–ò–ß–ï–°–ö–ò–ô - # –ø–æ—Å–ª–µ —Å—Ç—Ä–æ–∫–∏ —Å backslash
        Test("# –ø–æ—Å–ª–µ —Å—Ç—Ä–æ–∫–∏ —Å \\",
            @"path = ""C:\\Users\\Test\\""  # –ü—É—Ç—å
x = 10  # –ü–µ—Ä–µ–º–µ–Ω–Ω–∞—è
len(path) + x",
            27.0);  // "C:\Users\Test\" = 17 —Å–∏–º–≤–æ–ª–æ–≤ + 10 = 27

        // –¢–µ—Å—Ç 35: –ö–†–ò–¢–ò–ß–ï–°–ö–ò–ô - —Å—Ç—Ä–æ–∫–∞ —Å # –∏ \\ –≤–Ω—É—Ç—Ä–∏
        Test("–°—Ç—Ä–æ–∫–∞ —Å \\ –∏ #",
            @"s = ""Test\\#Value""  # –°—Ç—Ä–æ–∫–∞ —Å –æ–±—Ä–∞—Ç–Ω—ã–º —Å–ª—ç—à–µ–º
len(s)",
            12.0);  // "Test\#Value" = 11 —Å–∏–º–≤–æ–ª–æ–≤ (–Ω–æ –∫–∞–ª—å–∫—É–ª—è—Ç–æ—Ä –º–æ–∂–µ—Ç —Ö—Ä–∞–Ω–∏—Ç—å –∫–∞–∫ –µ—Å—Ç—å)

        // –¢–µ—Å—Ç 36: –ö–†–ò–¢–ò–ß–ï–°–ö–ò–ô - —Å—Ç—Ä–æ–∫–∞ –Ω–∞—á–∏–Ω–∞–µ—Ç—Å—è —Å # (–∫–∞–∫ –≤ Python)
        Test("–°—Ç—Ä–æ–∫–∞ –Ω–∞—á–∏–Ω–∞–µ—Ç—Å—è —Å #",
            @"a = ""#–ü—Ä–∏–≤–µ—Ç!""
len(a)",
            8.0);

        // –¢–µ—Å—Ç 37: –ö–†–ò–¢–ò–ß–ï–°–ö–ò–ô - –ø—É—Å—Ç–∞—è —Å—Ç—Ä–æ–∫–∞ —Å # —Å–Ω–∞—Ä—É–∂–∏
        Test("–ü—É—Å—Ç–∞—è —Å—Ç—Ä–æ–∫–∞ + –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π",
            @"a = """"  # –ü—É—Å—Ç–∞—è —Å—Ç—Ä–æ–∫–∞
b = ""#""  # –¢–æ–ª—å–∫–æ —Ö—ç—à—Ç–µ–≥
len(a) + len(b)",
            1.0);

        // –¢–µ—Å—Ç 38: –ö–†–ò–¢–ò–ß–ï–°–ö–ò–ô - # –≤ –Ω–∞—á–∞–ª–µ, —Å–µ—Ä–µ–¥–∏–Ω–µ –∏ –∫–æ–Ω—Ü–µ —Å—Ç—Ä–æ–∫–∏
        Test("# –≤–æ –≤—Å–µ—Ö –ø–æ–∑–∏—Ü–∏—è—Ö —Å—Ç—Ä–æ–∫–∏",
            @"s1 = ""#start""  # –ù–∞—á–∞–ª–æ
s2 = ""mid#dle""  # –°–µ—Ä–µ–¥–∏–Ω–∞  
s3 = ""end#""  # –ö–æ–Ω–µ—Ü
len(s1) + len(s2) + len(s3)",
            17.0);  // "#start" (6) + "mid#dle" (7) + "end#" (4) = 17

        Console.WriteLine($"\n=== –†–ï–ó–£–õ–¨–¢–ê–¢–´ ===");
        Console.WriteLine($"–í—Å–µ–≥–æ —Ç–µ—Å—Ç–æ–≤: {totalTests}");
        Console.WriteLine($"‚úÖ –ü—Ä–æ–π–¥–µ–Ω–æ: {passedTests}");
        Console.WriteLine($"‚ùå –ü—Ä–æ–≤–∞–ª–µ–Ω–æ: {failedTests}");

        if (failedTests > 0)
        {
            Console.WriteLine($"\n‚ö†Ô∏è –ï—Å—Ç—å –Ω–µ–ø—Ä–æ—à–µ–¥—à–∏–µ —Ç–µ—Å—Ç—ã!");
            Environment.Exit(1);
        }
        else
        {
            Console.WriteLine($"\nüéâ –í—Å–µ —Ç–µ—Å—Ç—ã –ø—Ä–æ–π–¥–µ–Ω—ã —É—Å–ø–µ—à–Ω–æ!");
            Environment.Exit(0);
        }
    }
}

