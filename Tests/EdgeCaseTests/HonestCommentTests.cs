using AI.ClassicMath.Calculator.ProcessorLogic;
using System;
using System.Linq;

namespace EdgeCaseTests;

/// <summary>
/// –ß–ï–°–¢–ù–´–ï –∏ –û–ë–™–ï–ö–¢–ò–í–ù–´–ï —Ç–µ—Å—Ç—ã –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤
/// –ü—Ä–æ–≤–µ—Ä—è–µ–º –†–ï–ê–õ–¨–ù–û–ï —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ —Å—Ç—Ä–æ–∫, –∞ –Ω–µ —Ç–æ–ª—å–∫–æ –¥–ª–∏–Ω—É!
/// </summary>
class HonestCommentTests
{
    static int passedTests = 0;
    static int failedTests = 0;
    static int totalTests = 0;

    /// <summary>
    /// –ß–µ—Å—Ç–Ω—ã–π —Ç–µ—Å—Ç: –ø—Ä–æ–≤–µ—Ä—è–µ—Ç –†–ï–ê–õ–¨–ù–û–ï —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ —Å—Ç—Ä–æ–∫–∏
    /// </summary>
    static void TestString(string testName, string script, string expectedString)
    {
        totalTests++;
        try
        {
            var processor = new Processor();
            var output = processor.Run(script);
            var hasError = output.Any(line => line.Contains("–ö–†–ò–¢–ò–ß–ï–°–ö–ê–Ø –û–®–ò–ë–ö–ê") || line.Contains("–û–®–ò–ë–ö–ê"));

            if (hasError)
            {
                failedTests++;
                Console.WriteLine($"‚ùå {testName}");
                Console.WriteLine($"   –û—à–∏–±–∫–∞ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è:");
                foreach (var line in output)
                {
                    Console.WriteLine($"   {line}");
                }
                return;
            }

            // –ò—â–µ–º —Ä–µ–∑—É–ª—å—Ç–∞—Ç (–ø–æ—Å–ª–µ–¥–Ω—é—é —Å—Ç—Ä–æ–∫—É —Å =>)
            string? actualString = null;
            foreach (var line in output)
            {
                if (line.Contains("=>"))
                {
                    var parts = line.Split(new[] { "=>" }, StringSplitOptions.None);
                    if (parts.Length >= 2)
                    {
                        actualString = parts[1].Trim();
                        // –£–±–∏—Ä–∞–µ–º –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –≤ —Å–∫–æ–±–∫–∞—Ö –µ—Å–ª–∏ –µ—Å—Ç—å
                        var bracketIndex = actualString.IndexOf('[');
                        if (bracketIndex > 0)
                        {
                            actualString = actualString.Substring(0, bracketIndex).Trim();
                        }
                    }
                }
            }

            bool passed = actualString == expectedString;

            if (passed)
            {
                passedTests++;
                Console.WriteLine($"‚úÖ {testName}");
                Console.WriteLine($"   –†–µ–∑—É–ª—å—Ç–∞—Ç: \"{actualString}\"");
            }
            else
            {
                failedTests++;
                Console.WriteLine($"‚ùå {testName}");
                Console.WriteLine($"   –û–∂–∏–¥–∞–ª–æ—Å—å: \"{expectedString}\"");
                Console.WriteLine($"   –ü–æ–ª—É—á–µ–Ω–æ:  \"{actualString}\"");
            }
        }
        catch (Exception ex)
        {
            failedTests++;
            Console.WriteLine($"‚ùå {testName}");
            Console.WriteLine($"   Exception: {ex.Message}");
        }
    }

    /// <summary>
    /// –ß–µ—Å—Ç–Ω—ã–π —Ç–µ—Å—Ç: –ø—Ä–æ–≤–µ—Ä—è–µ—Ç —á–∏—Å–ª–æ–≤–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ
    /// </summary>
    static void TestNumber(string testName, string script, double expected, double precision = 1e-8)
    {
        totalTests++;
        try
        {
            var processor = new Processor();
            var output = processor.Run(script);
            var hasError = output.Any(line => line.Contains("–ö–†–ò–¢–ò–ß–ï–°–ö–ê–Ø –û–®–ò–ë–ö–ê") || line.Contains("–û–®–ò–ë–ö–ê"));

            if (hasError)
            {
                failedTests++;
                Console.WriteLine($"‚ùå {testName}");
                Console.WriteLine($"   –û—à–∏–±–∫–∞ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è:");
                foreach (var line in output)
                {
                    Console.WriteLine($"   {line}");
                }
                return;
            }

            // –ò—â–µ–º —Ä–µ–∑—É–ª—å—Ç–∞—Ç
            double? actual = null;
            foreach (var line in output)
            {
                if (line.Contains("=>"))
                {
                    var parts = line.Split(new[] { "=>" }, StringSplitOptions.None);
                    if (parts.Length >= 2)
                    {
                        var valueStr = parts[1].Trim().Split(new[] { ' ', '[' })[0];
                        if (double.TryParse(valueStr, System.Globalization.NumberStyles.Any, 
                            System.Globalization.CultureInfo.InvariantCulture, out var val))
                        {
                            actual = val;
                        }
                    }
                }
            }

            bool passed = actual.HasValue && Math.Abs(actual.Value - expected) < precision;

            if (passed)
            {
                passedTests++;
                Console.WriteLine($"‚úÖ {testName}");
                Console.WriteLine($"   –†–µ–∑—É–ª—å—Ç–∞—Ç: {actual}");
            }
            else
            {
                failedTests++;
                Console.WriteLine($"‚ùå {testName}");
                Console.WriteLine($"   –û–∂–∏–¥–∞–ª–æ—Å—å: {expected}");
                Console.WriteLine($"   –ü–æ–ª—É—á–µ–Ω–æ:  {actual}");
            }
        }
        catch (Exception ex)
        {
            failedTests++;
            Console.WriteLine($"‚ùå {testName}");
            Console.WriteLine($"   Exception: {ex.Message}");
        }
    }

    static void Main(string[] args)
    {
        Console.WriteLine("‚ïî‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïó");
        Console.WriteLine("‚ïë  –ß–ï–°–¢–ù–´–ï –ò –û–ë–™–ï–ö–¢–ò–í–ù–´–ï –¢–ï–°–¢–´ –ö–û–ú–ú–ï–ù–¢–ê–†–ò–ï–í                   ‚ïë");
        Console.WriteLine("‚ïë  –ü—Ä–æ–≤–µ—Ä—è–µ–º –†–ï–ê–õ–¨–ù–û–ï —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ, –∞ –Ω–µ —Ç–æ–ª—å–∫–æ –¥–ª–∏–Ω—É!          ‚ïë");
        Console.WriteLine("‚ïö‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïù\n");

        // ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
        Console.WriteLine("‚ïê‚ïê‚ïê –ì–†–£–ü–ü–ê 1: # –í–ù–£–¢–†–ò –°–¢–†–û–ö (–ö–†–ò–¢–ò–ß–ï–°–ö–ò–ï –¢–ï–°–¢–´) ‚ïê‚ïê‚ïê\n");
        // ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê

        TestString("–ö–†–ò–¢–ò–ß–ï–°–ö–ò–ô: '#–ü—Ä–∏–≤–µ—Ç!'",
            @"a = ""#–ü—Ä–∏–≤–µ—Ç!""
a",
            "#–ü—Ä–∏–≤–µ—Ç!");

        TestString("–ö–†–ò–¢–ò–ß–ï–°–ö–ò–ô: 'Test#123'",
            @"s = ""Test#123""
s",
            "Test#123");

        TestString("–ö–†–ò–¢–ò–ß–ï–°–ö–ò–ô: '#' –≤ –Ω–∞—á–∞–ª–µ",
            @"s = ""#–Ω–∞—á–∞–ª–æ —Ç–µ–∫—Å—Ç–∞""
s",
            "#–Ω–∞—á–∞–ª–æ —Ç–µ–∫—Å—Ç–∞");

        TestString("–ö–†–ò–¢–ò–ß–ï–°–ö–ò–ô: '#' –≤ —Å–µ—Ä–µ–¥–∏–Ω–µ",
            @"s = ""—Ç–µ–∫—Å—Ç#—Å–µ—Ä–µ–¥–∏–Ω–∞""
s",
            "—Ç–µ–∫—Å—Ç#—Å–µ—Ä–µ–¥–∏–Ω–∞");

        TestString("–ö–†–ò–¢–ò–ß–ï–°–ö–ò–ô: '#' –≤ –∫–æ–Ω—Ü–µ",
            @"s = ""—Ç–µ–∫—Å—Ç –≤ –∫–æ–Ω—Ü–µ#""
s",
            "—Ç–µ–∫—Å—Ç –≤ –∫–æ–Ω—Ü–µ#");

        TestString("–ö–†–ò–¢–ò–ß–ï–°–ö–ò–ô: –ù–µ—Å–∫–æ–ª—å–∫–æ '#'",
            @"s = ""#–æ–¥–∏–Ω#–¥–≤–∞#—Ç—Ä–∏#""
s",
            "#–æ–¥–∏–Ω#–¥–≤–∞#—Ç—Ä–∏#");

        TestString("–ö–†–ò–¢–ò–ß–ï–°–ö–ò–ô: –¢–æ–ª—å–∫–æ '#'",
            @"s = ""#""
s",
            "#");

        TestString("–ö–†–ò–¢–ò–ß–ï–°–ö–ò–ô: –•—ç—à—Ç–µ–≥–∏",
            @"s = ""#hashtag #—Ç–µ–≥ #123""
s",
            "#hashtag #—Ç–µ–≥ #123");

        // ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
        Console.WriteLine("\n‚ïê‚ïê‚ïê –ì–†–£–ü–ü–ê 2: –ö–û–ú–ú–ï–ù–¢–ê–†–ò–ò –í–ù–ï –°–¢–†–û–ö (–î–û–õ–ñ–ù–´ –£–î–ê–õ–Ø–¢–¨–°–Ø) ‚ïê‚ïê‚ïê\n");
        // ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê

        TestString("–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π –ø–æ—Å–ª–µ —Å—Ç—Ä–æ–∫–∏",
            @"s = ""–ü—Ä–∏–≤–µ—Ç""  # –≠—Ç–æ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π
s",
            "–ü—Ä–∏–≤–µ—Ç");

        TestString("–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π –ù–ï –≤–ª–∏—è–µ—Ç –Ω–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é",
            @"x = ""–ó–Ω–∞—á–µ–Ω–∏–µ""  # –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π —Å #—Ö—ç—à—Ç–µ–≥–æ–º
x",
            "–ó–Ω–∞—á–µ–Ω–∏–µ");

        TestNumber("–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π –ø–æ—Å–ª–µ —á–∏—Å–ª–∞",
            @"x = 42  # –û—Ç–≤–µ—Ç –Ω–∞ –≤—Å—ë
x",
            42.0);

        TestNumber("–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π –ù–ï –æ–±—Ä–µ–∑–∞–µ—Ç –∫–æ–¥",
            @"a = 10  # –ü–µ—Ä–≤–æ–µ
b = 20  # –í—Ç–æ—Ä–æ–µ
a + b",
            30.0);

        // ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
        Console.WriteLine("\n‚ïê‚ïê‚ïê –ì–†–£–ü–ü–ê 3: –°–ú–ï–®–ê–ù–ù–´–ï –°–õ–£–ß–ê–ò (–°–¢–†–û–ö–ò + –ö–û–ú–ú–ï–ù–¢–ê–†–ò–ò) ‚ïê‚ïê‚ïê\n");
        // ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê

        TestString("–°—Ç—Ä–æ–∫–∞ —Å # + –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π —Å #",
            @"s = ""#–ü—Ä–∏–≤–µ—Ç""  # –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π —Å #—Ö—ç—à—Ç–µ–≥–æ–º
s",
            "#–ü—Ä–∏–≤–µ—Ç");

        TestString("–î–≤–µ —Å—Ç—Ä–æ–∫–∏ —Å # + –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏",
            @"s1 = ""#–æ–¥–∏–Ω""  # –ü–µ—Ä–≤—ã–π
s2 = ""–¥–≤–∞#""  # –í—Ç–æ—Ä–æ–π
concat(s1, s2)",
            "#–æ–¥–∏–Ω–¥–≤–∞#");

        TestString("–ü—É—Å—Ç–∞—è —Å—Ç—Ä–æ–∫–∞ + –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π",
            @"s = """"  # –ü—É—Å—Ç–∞—è —Å—Ç—Ä–æ–∫–∞
s",
            "");

        TestNumber("–°—Ç—Ä–æ–∫–∞ —Å # –≤–Ω—É—Ç—Ä–∏ –≤—ã—Ä–∞–∂–µ–Ω–∏—è",
            @"s1 = ""Test#123""
s2 = ""#Start""
len(s1) + len(s2)",
            14.0);  // "Test#123" (8) + "#Start" (6) = 14

        // ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
        Console.WriteLine("\n‚ïê‚ïê‚ïê –ì–†–£–ü–ü–ê 4: ESCAPED –°–ò–ú–í–û–õ–´ (\\) + –ö–û–ú–ú–ï–ù–¢–ê–†–ò–ò ‚ïê‚ïê‚ïê\n");
        // ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê

        TestString("–°—Ç—Ä–æ–∫–∞ —Å \\\\ + –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π",
            @"s = ""C:\\Users""  # –ü—É—Ç—å Windows
s",
            "C:\\\\Users");  // –ö–∞–ª—å–∫—É–ª—è—Ç–æ—Ä –ù–ï –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç escape, —Ö—Ä–∞–Ω–∏—Ç \\ –∫–∞–∫ –µ—Å—Ç—å

        TestString("–°—Ç—Ä–æ–∫–∞ —Å \\\\ –∏ # –≤–Ω—É—Ç—Ä–∏ + –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π",
            @"s = ""Path\\#folder""  # –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π
s",
            "Path\\\\#folder");

        TestString("–°—Ç—Ä–æ–∫–∞ —Å \\\\ –ø–µ—Ä–µ–¥ –∫–∞–≤—ã—á–∫–æ–π + –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π",
            @"s = ""Text\\""  # –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π –ù–ï –¥–æ–ª–∂–µ–Ω —É–¥–∞–ª–∏—Ç—å—Å—è –ø–æ—Å–ª–µ \\"" 
s",
            "Text\\\\");

        // ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
        Console.WriteLine("\n‚ïê‚ïê‚ïê –ì–†–£–ü–ü–ê 5: –ì–†–ê–ù–ò–ß–ù–´–ï –°–õ–£–ß–ê–ò ‚ïê‚ïê‚ïê\n");
        // ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê

        TestNumber("–¢–æ–ª—å–∫–æ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π (–ø—É—Å—Ç–æ–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç)",
            @"# –¢–æ–ª—å–∫–æ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π
x = 0
x",
            0.0);

        TestString("# –≤ –Ω–∞—á–∞–ª–µ —Å—Ç—Ä–æ–∫–∏ –∫–æ–¥–∞",
            @"# –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π
s = ""–¢–µ–∫—Å—Ç""
s",
            "–¢–µ–∫—Å—Ç");

        TestNumber("–ú–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ # –≤ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏",
            @"x = 10  ### –í–∞–∂–Ω—ã–π –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π ###
x",
            10.0);

        TestNumber("# –±–µ–∑ –ø—Ä–æ–±–µ–ª–∞",
            @"x = 5#–∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π
x",
            5.0);

        // ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
        Console.WriteLine("\n‚ïê‚ïê‚ïê –ì–†–£–ü–ü–ê 6: –°–õ–û–ñ–ù–´–ï –ö–û–ù–°–¢–†–£–ö–¶–ò–ò ‚ïê‚ïê‚ïê\n");
        // ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê

        TestString("–ú–ê–°–°–ò–í–´ –°–¢–†–û–ö: –ú–∞—Å—Å–∏–≤ —Å—Ç—Ä–æ–∫ —Å # + –∏–Ω–¥–µ–∫—Å–∞—Ü–∏—è",
            @"arr = [""#–æ–¥–∏–Ω"", ""–¥–≤–∞#"", ""#—Ç—Ä–∏#""]  # –ú–∞—Å—Å–∏–≤ —Å—Ç—Ä–æ–∫
index(arr, 1)",
            "–¥–≤–∞#");

        TestNumber("–ú–ê–°–°–ò–í–´ –°–¢–†–û–ö: len() –º–∞—Å—Å–∏–≤–∞ —Å—Ç—Ä–æ–∫",
            @"arr = [""#test"", ""hello"", ""world""]
len(arr)",
            3.0);

        TestString("–ú–ê–°–°–ò–í–´ –°–¢–†–û–ö: –ö–æ–Ω–∫–∞—Ç–µ–Ω–∞—Ü–∏—è —ç–ª–µ–º–µ–Ω—Ç–æ–≤",
            @"arr = [""#start"", ""middle#"", ""end#""]  # –ú–∞—Å—Å–∏–≤ —Å —Ö—ç—à—Ç–µ–≥–∞–º–∏
concat(index(arr, 0), index(arr, 2))",
            "#startend#");

        TestNumber("–†–∞–±–æ—Ç–∞ —Å –Ω–µ—Å–∫–æ–ª—å–∫–∏–º–∏ —Å—Ç—Ä–æ–∫–∞–º–∏ —Å #",
            @"s1 = ""#–æ–¥–∏–Ω""
s2 = ""–¥–≤–∞#—Ç—Ä–∏""
len(s1) + len(s2)",
            12.0);  // 5 + 7 = 12

        TestString("–£—Å–ª–æ–≤–∏–µ if —Å –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–º",
            @"x = 5  # –ó–Ω–∞—á–µ–Ω–∏–µ
if x > 3:  # –ü—Ä–æ–≤–µ—Ä–∫–∞
    result = ""–ë–æ–ª—å—à–µ""  # –†–µ–∑—É–ª—å—Ç–∞—Ç
else:
    result = ""–ú–µ–Ω—å—à–µ""
result",
            "–ë–æ–ª—å—à–µ");

        TestString("–¶–∏–∫–ª —Å –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏—è–º–∏",
            @"# –¶–∏–∫–ª
s = """"  # –ü—É—Å—Ç–∞—è
for i = 0 to 2:  # –û—Ç 0 –¥–æ 2
    s = ""Done""  # –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º
s",
            "Done");

        // –§–∏–Ω–∞–ª—å–Ω–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞
        Console.WriteLine("\n‚ïî‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïó");
        Console.WriteLine($"‚ïë  –ò–¢–û–ì–ò: {passedTests}/{totalTests} —Ç–µ—Å—Ç–æ–≤ –ø—Ä–æ–π–¥–µ–Ω–æ ({(passedTests * 100.0 / totalTests):F1}%)");
        Console.WriteLine($"‚ïë  ‚úÖ –£—Å–ø–µ—à–Ω—ã—Ö: {passedTests}");
        Console.WriteLine($"‚ïë  ‚ùå –ü—Ä–æ–≤–∞–ª–µ–Ω–æ: {failedTests}");
        Console.WriteLine("‚ïö‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïù\n");

        if (failedTests > 0)
        {
            Console.WriteLine("‚ö†Ô∏è –ï—Å—Ç—å –Ω–µ–ø—Ä–æ—à–µ–¥—à–∏–µ —Ç–µ—Å—Ç—ã!");
            Environment.Exit(1);
        }
        else
        {
            Console.WriteLine("üéâ –í–°–ï –ß–ï–°–¢–ù–´–ï –¢–ï–°–¢–´ –ü–†–û–ô–î–ï–ù–´!");
            Environment.Exit(0);
        }
    }
}

